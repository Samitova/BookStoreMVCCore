@using BookStore.ViewModelData   
@model BookVM

@{
    ViewData["Title"] = Model.Title;
    var photoPath = $"~/pictures/uploads/books/{Model.PhotoPath}";
    ProgressBarVM progressBar = new ProgressBarVM();
}

<div class="container-fluid book-wrapper ">
    <div class="row w-75 mx-auto">
        <div class="col-md text-center">
            <img src="@photoPath" class="img-fluid" alt="..." asp-append-version="true">
        </div>
        <div class="col-md ">
            <p class="book-deteils-title">@Model.Title.ToUpper()</p>

            <div class="row">
                <div class="col-md">
                    <p class="book-deteils-item">Author: <a class="book-deteils-link" asp-aria="customer" asp-controller="shop" asp-action="AuthorDetails" asp-route-id="@Model.AuthorId">@Model.AuthorFullName </a></p>
                    <p class="book-deteils-item">Publisher:<a href="#" class="book-deteils-link"> @Model.PublisherName</a></p>
                    <p class="book-deteils-item">Year Of Issue: <span>@Model.YearOfIssue</span></p>
                    <p class="book-deteils-item">ISBN: <span>@Model.ISBN</span></p>

                </div>
                <div class="col-md">
                    <p class="book-deteils-item">Genre: <span>@Model.Genre</span></p>
                    <p class="book-deteils-item">Pages: <span>@Model.NumberOfPage</span></p>
                    <p class="book-deteils-item">Cover type: <span>@Model.CoverType</span></p>
                </div>
            </div>
            <hr />
            <p class="book-deteils-item text-center">Annotation</p>
            <p class="book-deteils-annotation">@Model.Annotation</p>

            <hr />
            <div class="rating-box">
                <partial name="_RatingBarPartial" model="@Model.RateValue" />
            </div>

            <div class="availiable-quantaty">In stock @Model.AvaliableQuantaty item(s)</div>
            <div class="sold-quantaty">Were sold @Model.SoldCopies item(s)</div>

            <div class="prices-box">               
                <div class="price-item-main d-inline">@Model.Price $</div>
            </div>

            <div class="product-edit-group">
                <a class="btn edit-btn" asp-area="Admin" asp-controller="Product"
                   asp-action="UpdateProduct" asp-route-id="@Model.Id">Edit</a>
                <a class="btn delete-btn" asp-area="Admin" asp-controller="Product"
                   asp-action="DeleteProduct" asp-route-id="@Model.Id">Delete</a>
            </div>

        </div>
    </div>
    <div class="row w-75 mx-auto mt-3">
        <p class="rating-header">Reviews</p>
    </div>
    <div class="row w-75 mx-auto rating-container">
        <div class="col-md text-center big-rate-box">
            <div class="big-rate-item">
                <span class="big-rate-value">@Model.RateValue</span>
                <span class="big-rate-count">/@Model.RateCount</span>
            </div>
            <div class="big-rate-item">
                <span class="big-rate-stars">
                    <partial name="_RatingBarPartial" model="@Model.RateValue" />
                </span>
            </div>
            <div class="big-rate-item">
                <div class="rating-count">@Model.RateCount reviews</div>
            </div>
        </div>
        <div class="col-md progress-box">
            @foreach (var bar in Model.ProgressBar)
            {
                <partial name="_ProgressBarPartial" model="@bar" />
            }
        </div>       
    </div>

    @foreach (var item in Model.Comments)
    {
        <partial name="_CommentPartitial" model="@item" />
    }
</div>

@section Scripts
{
    <script src="~/scripts/bookdetailsscripts.js"></script>    
}